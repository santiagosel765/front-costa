<nz-card nzTitle="Sucursales" [nzExtra]="actionsTpl">
  <app-data-table
    [columns]="columns"
    [data]="rows()"
    [loading]="loading()"
    [error]="error()"
    [total]="total()"
    [pageIndex]="tableState.snapshot.page"
    [pageSize]="tableState.snapshot.size"
    [searchValue]="tableState.snapshot.q"
    searchPlaceholder="Buscar sucursal"
    (pageChange)="onPageChange($event)"
    (searchChange)="onSearchChange($event)"
    (action)="handleAction($event)"
  ></app-data-table>
</nz-card>

<ng-template #actionsTpl>
  <button *ngIf="canWrite()" nz-button nzType="primary" (click)="openCreate()">Nueva sucursal</button>
</ng-template>

<nz-modal [nzVisible]="isModalVisible()" [nzTitle]="editingId() ? 'Editar sucursal' : 'Nueva sucursal'" [nzOkLoading]="loading()" (nzOnCancel)="closeModal()" (nzOnOk)="save()">
  <form [formGroup]="form" class="branch-form">
    <label>CÃ³digo</label>
    <input nz-input formControlName="code" />

    <label>Nombre</label>
    <input nz-input formControlName="name" />

    <label>Activo</label>
    <nz-switch formControlName="active"></nz-switch>
  </form>
</nz-modal>
